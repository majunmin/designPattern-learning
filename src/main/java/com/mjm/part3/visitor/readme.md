# 访问者模式 Visitor Design Pattern

level1 代码问题:

1. 不符合开闭原则
2. 若功能曾多,每个类的代码不断膨胀,可读性和可维护性变差
3. 把上层的业务逻辑耦合在 PdfFile/PPtFile/wordFile 中,这些类的职责不够单一

level3 的代码:
将业务操作逻辑和 数据结构解耦,设计成独立的类

level4:
标准的访问者模式
![](https://gitee.com/niubenwsl/image_repo/raw/master/image/java/20210413225151.png)

访问者模式: 允许一个或者多个动作应用到一组对象之上,解耦操作和对象本身

访问者模式针对一组类型不同的对象,但是他们继承自相同的父类 或者实现相同的接口,在不同的业务场景下,我们需要对这组对象进行不同的业务操作:
为了防止频繁的添加功能导致 资源类不断膨胀,功能不够单一,以及避免频繁的添加功能导致频繁的代码修改
所以使用访问者模式,将资源对象和对象的业务操作解耦,将业务操作抽离,定义在独立细分的类中




### 那些框架用到了访问者模式

1. jsqlparser
2. Alibaba Druid，Apache Calcite
3. spring占位符解析
4. 语法树一般都会用, 基本就是在树形结构上每个节点有不同操作时才适合访问者模式









